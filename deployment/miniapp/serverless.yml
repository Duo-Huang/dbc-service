# Miniapp 服务配置
# 使用 SCF CLI 部署: scf deploy

component: scf
name: dbc-miniapp
org: qypeak
app: dbc
stage: dev

inputs:
    name: dbc-miniapp
    type: web
    src:
        src: ../../dist/apps/miniapp
        exclude:
            - .env
    runtime: Nodejs22.20
    region: ap-chengdu
    memorySize: 512
    timeout: 30
    environment:
        variables:
            NODE_ENV: production
            MINIAPP_SERVER_PORT: 9000
    layers:
        - name: dbc-deps-layer
          version: 1
    events:
        - http:
              parameters:
                  netConfig:
                  enableIntranet: true
                  enableExtranet: true
                  qualifier: $DEFAULT
                  authType: NONE
