version: '3.8'

services:
    console:
        build:
            context: ..
            dockerfile: deployment/Dockerfile.example
            target: console
        container_name: dbc-console
        ports:
            - '3000:3000'
        environment:
            - NODE_ENV=production
            - PORT=3000
        restart: unless-stopped
        networks:
            - dbc-network

    miniapp:
        build:
            context: ..
            dockerfile: deployment/Dockerfile.example
            target: miniapp
        container_name: dbc-miniapp
        ports:
            - '3001:3001'
        environment:
            - NODE_ENV=production
            - PORT=3001
        restart: unless-stopped
        networks:
            - dbc-network

networks:
    dbc-network:
        driver: bridge
# 使用说明:
# 1. 重命名此文件为 docker-compose.yml
# 2. 重命名 Dockerfile.example 为 Dockerfile
# 3. 根据需要调整环境变量和端口
# 4. 运行: docker-compose up -d
# 5. 查看日志: docker-compose logs -f
# 6. 停止: docker-compose down

